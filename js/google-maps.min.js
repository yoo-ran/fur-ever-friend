!function(a){"use strict";function n(o,t){this.element=o,this.options=a.extend({},e,t),this._defaults=e,this._name=i,this._centered=!1,this._zoomed=!1,this.init()}var i="googleMaps",e={callback:!1,center:!1,key:!1,options:{},points:[],responsive:!1,zoom:!1},o="googleMapsWindowResized",t=!1;n.loaded=!1,n.prototype.init=function(){this._styles=a(this.element).attr("style"),this._content=a(this.element).html(),this.load()},n.prototype.load=function(){if("undefined"!=typeof google&&void 0!==google.maps)return n.loaded=!0,this.draw();if(void 0===window.googleMaps&&(window.googleMaps=[]),window.googleMaps.push(this),!n.loaded){var o="//maps.googleapis.com/maps/api/js";o+="?v=3.31",o=(o+="&callback=googleMapsInit")+"&key="+this.options.key,a.getScript(o),n.loaded=!0}},n.prototype.draw=function(){var e=this;e.map=new google.maps.Map(e.element),e.bounds=new google.maps.LatLngBounds,e.map.setOptions(e.options.options),a.each(e.options.points,function(o,t){e.insertPoint(t)}),e.zoom(),e.options.responsive&&a(window).on(o,function(){e.zoom()}),e.options.callback&&e.options.callback(e)},n.prototype.zoom=function(){var o=this,t=o.options.center,e=o.options.zoom;o.map.fitBounds(o.bounds),t&&void 0!==t.lat&&void 0!==t.lng&&(o.map.setCenter(t),o.map.addListener("bounds_changed",function(){o._centered||(o.map.setCenter(t),o._centered=!0)})),e&&(o.map.setZoom(e),o.map.addListener("bounds_changed",function(){o._zoomed||(o.map.setZoom(e),o._zoomed=!0)}))},n.prototype.insertPoint=function(o){var t=this,e=a.extend({lat:!1,lng:!1,marker:!1,title:!1,infoWindow:!1},o);if(e.lat&&e.lng){var n=new google.maps.LatLng({lat:e.lat,lng:e.lng});if(t.bounds.extend(n),e.marker){var i=new google.maps.Marker({map:t.map,position:n});if("string"===a.type(e.marker)&&i.setIcon(e.marker),e.title&&i.setTitle(e.title),e.infoWindow){var s=new google.maps.InfoWindow({content:e.infoWindow});i.addListener("click",function(){s.open(t.map,i)})}}}},n.prototype.remove=function(){var o=a(this.element);o.html(this._content),o.attr("style",this._styles)},n.prototype.destroy=function(){this.remove(),a.removeData(this.element,i)},a.fn[i]=function(t){var o=this;if("instance"!==o.options)return o.each(function(){var o=a.data(this,i);if("string"===a.type(t)){if(void 0===o)return;switch(t){case"redraw":return o.draw();case"remove":return o.remove();case"destroy":return o.destroy();default:return}}"undefined"==a.type(o)&&(o=new n(this,t),a.data(this,i,o))}),o;var e=[];return o.each(function(){e.push(a.data(o,i))}),1===e.length?e[0]:e},window.googleMapsInit=function(){void 0!==window.googleMaps&&a.each(window.googleMaps,function(o,t){t.draw()})},a(window).on("resize",function(){window.clearTimeout(t),t=setTimeout(function(){a(window).trigger(o)},100)})}(jQuery);